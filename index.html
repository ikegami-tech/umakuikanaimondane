<!DOCTYPE html>
<html lang="ja">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Sysnipo - ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆé€£æº (å¼·åŒ–ç‰ˆ)</title>
Â  Â  <style>
Â  Â  Â  Â  body { font-family: sans-serif; max-width: 650px; margin: 2rem auto; padding: 0 1rem; background-color: #f7f7f7; }
Â  Â  Â  Â  h1 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 0.5rem; }
Â  Â  Â  Â  .form-group { margin-bottom: 1.5rem; }
Â  Â  Â  Â  label { display: block; margin-bottom: 0.75rem; font-weight: bold; color: #555; }
Â  Â  Â  Â  input[type="text"], textarea { width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
Â  Â  Â  Â  button.submit-btn { padding: 0.75rem 1.5rem; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 4px; font-size: 16px; }
Â  Â  Â  Â  
        /* ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .condition-group { display: flex; flex-wrap: wrap; gap: 8px; }
        .condition-btn {
            background: #ffffff;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            flex-grow: 1; /* ãƒœã‚¿ãƒ³ã®å¹…ã‚’å‡ç­‰ã«åºƒã’ã‚‹ */
            text-align: center;
        }
        .condition-btn:hover { background-color: #e6e6e6; }
        .condition-btn.selected {
            border-color: #007bff;
            background-color: #e0f0ff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

Â  Â  Â  Â  #data-list { margin-top: 3rem; border-top: 1px dashed #ccc; padding-top: 1.5rem; }
Â  Â  Â  Â  .item { background: #ffffff; padding: 1.25rem; margin-bottom: 1rem; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .item strong { color: #333; }
        .item small { color: #888; display: block; margin-top: 0.25rem; }
Â  Â  </style>
</head>
<body>

Â  Â  <h1>æ—¥å ±ãƒ»ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å ±å‘Š</h1>

Â  Â  <div class="form-group">
Â  Â  Â  Â  <label>ãŠåå‰</label>
Â  Â  Â  Â  <input type="text" id="name" placeholder="æ°åã‚’å…¥åŠ›">
Â  Â  </div>
    
    <div class="form-group">
Â  Â  Â  Â  <label>ä»Šæ—¥ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ï¼ˆé¸æŠã—ã¦ãã ã•ã„ï¼‰</label>
        <div class="condition-group" id="condition-buttons">
            </div>
        <input type="hidden" id="condition" value=""> Â  Â  </div>

Â  Â  <div class="form-group">
Â  Â  Â  Â  <label>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ—¥å ±å†…å®¹ï¼‰</label>
Â  Â  Â  Â  <textarea id="message" placeholder="æœ¬æ—¥ã®æ¥­å‹™å†…å®¹ã‚„ç‰¹è¨˜äº‹é …ã‚’å…¥åŠ›"></textarea>
Â  Â  </div>
Â  Â  <button onclick="sendData()" class="submit-btn">é€ä¿¡ã™ã‚‹</button>

Â  Â  <div id="data-list">
Â  Â  Â  Â  èª­ã¿è¾¼ã¿ä¸­...
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // â˜…ã“ã“ã«GASã®URLã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„
Â  Â  Â  Â  const GAS_URL = "https://script.google.com/macros/s/AKfycbw_NeSZltlMfN517RARhqhZdvF5aU3SJjhWf0ScwX0PFCjYcx1Y5rWgmEXE2SQgSIl-yg/exec"; 

        // 10ç¨®é¡ã®çµµæ–‡å­—
        const EMOJIS = ['ğŸ˜„', 'ğŸ‘', 'ğŸ˜Š', 'ğŸ¤”', 'ğŸ˜“', 'ğŸ˜´', 'ğŸ˜¤', 'ğŸ¤’', 'ğŸ‰', 'ğŸ’¡'];
        
        // ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®ç”Ÿæˆã¨ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        function setupConditionButtons() {
            const container = document.getElementById('condition-buttons');
            const conditionInput = document.getElementById('condition');

            EMOJIS.forEach(emoji => {
                const button = document.createElement('button');
                button.className = 'condition-btn';
                button.type = 'button'; // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚’é˜²ã
                button.innerHTML = emoji;
                
                button.addEventListener('click', () => {
                    // å…¨ã¦ã®ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’è§£é™¤
                    document.querySelectorAll('.condition-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                    button.classList.add('selected');
                    
                    // é¸æŠã•ã‚ŒãŸçµµæ–‡å­—ã‚’éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜
                    conditionInput.value = emoji;
                });
                container.appendChild(button);
            });
        }
        
Â  Â  Â  Â  // ãƒ‡ãƒ¼ã‚¿é€ä¿¡ï¼ˆPOSTï¼‰
Â  Â  Â  Â  function sendData() {
Â  Â  Â  Â  Â  Â  const name = document.getElementById('name').value;
            const condition = document.getElementById('condition').value; // â˜…æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿
Â  Â  Â  Â  Â  Â  const message = document.getElementById('message').value;

Â  Â  Â  Â  Â  Â  if(!name || !condition || !message) { alert("åå‰ã€ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¨ã¦å…¥åŠ›ãƒ»é¸æŠã—ã¦ãã ã•ã„"); return; }

            // â˜…conditionã‚‚å«ã‚ã¦ãƒ‡ãƒ¼ã‚¿ã‚’GASã¸é€ã‚‹
Â  Â  Â  Â  Â  Â  const data = { name: name, condition: condition, message: message };

Â  Â  Â  Â  Â  Â  fetch(GAS_URL, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  mode: 'no-cors', 
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  alert("é€ä¿¡ã—ã¾ã—ãŸï¼");
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('name').value = "";
                document.getElementById('condition').value = ""; // éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('.condition-btn').forEach(btn => btn.classList.remove('selected')); // é¸æŠçŠ¶æ…‹è§£é™¤
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('message').value = "";
Â  Â  Â  Â  Â  Â  Â  Â  fetchData(); // ãƒªã‚¹ãƒˆã‚’æ›´æ–°
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .catch(err => alert("é€ä¿¡ã‚¨ãƒ©ãƒ¼: " + err));
Â  Â  Â  Â  }

Â  Â  Â  Â  // ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆGETï¼‰
Â  Â  Â  Â  function fetchData() {
Â  Â  Â  Â  Â  Â  fetch(GAS_URL)
Â  Â  Â  Â  Â  Â  .then(response => response.json())
Â  Â  Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  const list = document.getElementById('data-list');
Â  Â  Â  Â  Â  Â  Â  Â  list.innerHTML = "<h2>å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§</h2>";
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // æ–°ã—ã„é †ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã«é€†é †ã«ã™ã‚‹
Â  Â  Â  Â  Â  Â  Â  Â  data.reverse().forEach(row => {
                    // â˜…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¤‰ã‚ã‚Šã¾ã™ï¼ [0:æ—¥ä»˜, 1:åå‰, 2:ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³, 3:ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date(row[0]).toLocaleString();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const name = row[1];
                    const condition = row[2]; // â˜…æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const msg = row[3];      // â˜…ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒ3ã«å¤‰ã‚ã‚‹
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.className = 'item';
                    // ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã«è¿½åŠ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.innerHTML = `<strong>${name} (${condition})</strong> <small>(${date})</small><br>${msg}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list.appendChild(div);
Â  Â  Â  Â  Â  Â  Â  Â  });
                if (data.length === 0) {
                    list.innerHTML += "<p>ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
                }
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .catch(err => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('data-list').innerHTML = "ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ";
Â  Â  Â  Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
Â  Â  Â  Â  window.onload = () => {
            setupConditionButtons(); // ãƒœã‚¿ãƒ³ã‚’åˆæœŸåŒ–
            fetchData(); // ãƒ‡ãƒ¼ã‚¿å–å¾—
        };
Â  Â  </script>
</body>
</html>
